
#include "KinLimitsDriver_template.any"
#include "KinLimitsDriver_template2.any"


Main ={
  AnyFolder Model ={
    
    AnyFixedRefFrame GlobalRef ={
      AnyDrawRefFrame drw ={ScaleXYZ =0.3*{1,1,1};};
    };
    
    AnySeg Slider1 ={ r0={0,0,0.1};  Mass =10; Jii={0,0,0};  AnyDrawRefFrame drw ={ScaleXYZ =0.3*{1,1,1};RGB ={0,0,1};}; };
    AnySeg Slider2 ={ r0={0,0,0.5}; Mass =10; Jii={0,0,0}; AnyDrawRefFrame drw ={ScaleXYZ =0.3*{1,1,1};RGB ={0,1,0};}; };
    
    AnyPrismaticJoint Jnt1 ={ AnyRefFrame &ref1=.GlobalRef; AnyRefFrame &ref2=.Slider1; };
    AnyPrismaticJoint Jnt2 ={AnyRefFrame &ref1=.GlobalRef; AnyRefFrame &ref2=.Slider2; };
    
    AnyKinEqSimpleDriver Slider2Driver ={
      AnyPrismaticJoint &ref=.Jnt2;
      DriverPos={0.25};
      DriverVel={2.5};
    };
    
    AnyKinPLine Slider1ToSlider2 ={
      AnyRefFrame &ref1=.Slider1;
      AnyRefFrame &ref2=.Slider2;
      AnyDrawPLine drw ={Thickness=0.005;RGB={0,0,1};};
    };
    
    AnyKinEqSimpleDriver Slider1Driver ={
      AnyKinPLine &ref=.Slider1ToSlider2;
      DriverPos={0.5};
      DriverVel={0.0};
      CType={Soft};
      AnyFunConst ConstFun = { Value = {0.1}; };
      WeightFun = {&ConstFun};      
          
    };
    

    KinLimitsDriver Limit(KinMeasure = .Jnt1) =
    {
      LowerLimit = -10;
      HighLimit = 1;
      HighLimitHard= 1.0001;
      ErrorAtHardLimit = 10;
    };
    
    
        
    
  }; //Model
  
  AnyBodyStudy  MyStudy ={
    AnyFolder &ref=.Model;
    Gravity ={0,-9.81,0};
    tEnd = 2;
    InitialConditions.SolverType = KinSolOverDeterminate;
    Kinematics.SolverType = KinSolOverDeterminate; 
  };
 
  
  
  
};


